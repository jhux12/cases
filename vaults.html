<!DOCTYPE html>
<html lang="en" class="overflow-x-hidden">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Packly.gg | Vaults</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css" />
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="scripts/firebase-config.js"></script>
  <script src="scripts/auth.js" type="module"></script>
  <style>
    .timer-badge {
      animation: pulse 1s ease-in-out infinite alternate;
    }
    @keyframes pulse {
      from { transform: scale(1); }
      to { transform: scale(1.1); }
    }
  </style>
  <style>
    .legendary-spark{overflow:visible;}
    .legendary-spark::before,
    .legendary-spark::after {
      content:'';
      position:absolute;
      top:50%;
      left:50%;
      width:6px;
      height:6px;
      background:radial-gradient(circle, rgba(250,204,21,1) 0%, rgba(250,204,21,0) 70%);
      border-radius:50%;
      pointer-events:none;
      animation:spark-burst 0.8s linear infinite;
    }
    .legendary-spark::after { animation-delay:0.4s; }
    @keyframes spark-burst {
      0% { transform:translate(-50%, -50%) scale(1); opacity:1; }
      100% { transform:translate(calc(-50% + var(--sx)), calc(-50% + var(--sy))) scale(0.2); opacity:0; }
    }
    .legendary-spark::before { --sx:-30px; --sy:-30px; }
    .legendary-spark::after { --sx:30px; --sy:-30px; }
  </style>
</head>
<body class="bg-gradient-to-br from-black via-gray-900 to-black min-h-screen text-white">
<script src="scripts/preloader.js"></script>
  <header></header>
  <section class="pt-32 pb-20 max-w-4xl mx-auto px-4">
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold">Vaults</h1>
      <p class="text-gray-300 mt-2">Exclusive limited-time packs where you pick one of five cards to win its coin value.</p>
    </div>
      <div id="active-pick" class="relative p-8 bg-black/40 backdrop-blur rounded-3xl border border-yellow-500/40 shadow-2xl flex flex-col items-center text-center">
        <h2 id="pack-name" class="text-3xl font-bold mb-4"></h2>
        <div class="relative w-56 sm:w-72 mx-auto mb-4">
          <img id="pack-image" alt="Vault" class="relative z-10 w-full h-auto object-contain mx-auto drop-shadow-xl transform transition-transform duration-300 hover:scale-105">
          <div id="vault-timer" class="timer-badge absolute -top-4 -right-4 bg-gradient-to-r from-pink-500 to-purple-600 text-white text-sm font-bold px-3 py-1 rounded-full shadow-lg">30:00</div>
        </div>
        <div class="flex justify-center mb-4">
          <button id="pf-info" class="flex items-center gap-2 text-sm font-semibold text-green-400 hover:text-green-300 transition cursor-pointer">
            <i class="fa-solid fa-shield-halved text-green-400 text-base drop-shadow"></i>
            <span>Provably Fair</span>
          </button>
        </div>
        <div class="mb-6 w-full flex flex-col items-center">
          <h3 class="text-lg font-semibold mb-2">Possible Rewards</h3>
          <div id="card-slider" class="relative flex overflow-x-auto gap-3 px-1 py-1 scrollbar-hide w-full h-32 sm:h-40"></div>
        </div>
        <a id="open-link" href="#" class="open-button glow-button text-lg px-8 py-3 mb-6">Open for <span id="pack-price"></span> <img src="https://cdn-icons-png.flaticon.com/128/6369/6369589.png" class="w-5 h-5 inline-block align-[-2px]"></a>
      </div>
  </section>
  <!-- Provably Fair Modal -->
  <div id="provably-fair-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="bg-gray-900 p-4 rounded-xl w-full max-w-sm text-white relative border border-white/10">
      <button onclick="document.getElementById('provably-fair-modal').classList.add('hidden')" class="absolute top-2 right-3 text-white text-xl">&times;</button>
      <h3 class="text-lg font-bold mb-3">Provably Fair</h3>
      <p class="text-xs text-gray-300 mb-4">All outcomes are generated using your client seed, our server seed, and a nonce. The resulting roll is compared against the case odds to decide the prize, ensuring every spin is fair and verifiable.</p>
      <div class="text-left text-xs space-y-2 font-mono text-gray-100 break-words">
        <div><strong>Server Seed:</strong> <span id="pf-server-seed">...</span></div>
        <div><strong>Client Seed:</strong> <span id="pf-client-seed">...</span></div>
        <div><strong>Nonce:</strong> <span id="pf-nonce">...</span></div>
      </div>
      <div class="mt-4 space-y-2 text-xs">
        <input id="client-seed-input" type="text" placeholder="New client seed" class="w-full px-2 py-1 rounded bg-gray-800 text-white" />
        <button id="update-client-seed" class="w-full bg-green-600 hover:bg-green-500 rounded py-2 text-white">Update Client Seed</button>
        <button id="new-server-seed" class="w-full bg-purple-600 hover:bg-purple-500 rounded py-2 text-white">New Server Seed</button>
        <a href="verify.html" class="block text-center text-blue-400 hover:underline mt-2">Verify a roll</a>
      </div>
    </div>
  </div>
  <footer></footer>
  <script src="scripts/header.js"></script>
  <script src="scripts/footer.js"></script>
  <script src="scripts/navbar.js"></script>
  <script src="scripts/topup.js"></script>
  <script src="scripts/vaults.js"></script>
</body>
</html>
