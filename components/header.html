<!-- header.html -->
<header class="site-header fixed inset-x-0 top-0 z-50">
  <div class="nav-shell">
    <div class="flex items-center justify-between gap-6">
      <!-- Left: Logo -->
      <div class="flex items-center gap-3">
        <a href="index.html" class="flex items-center gap-3">
          <span class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-slate-900/80 ring-1 ring-white/10">
            <img src="https://firebasestorage.googleapis.com/v0/b/cases-e5b4e.firebasestorage.app/o/Untitled%20design%20(28).png?alt=media&token=61fab7cf-c6e5-4598-8865-bd95007d6961" class="h-9 w-9 object-contain" alt="Packly logo">
          </span>
          <div class="hidden sm:flex flex-col">
            <span class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-300">Packly</span>
            <span class="text-xs text-slate-400">Virtual Packs â€¢ Real Cards</span>
          </div>
        </a>
      </div>

      <!-- Right: Desktop Menu -->
      <div class="hidden lg:flex items-center gap-2">
        <nav class="flex items-center gap-1" aria-label="Primary">
          <a href="index.html" class="nav-pill">
            <i class="fas fa-box-open"></i>
            <span>Open Packs</span>
          </a>
          <a href="box-battles.html" class="nav-pill">
            <span class="flex items-center gap-1"><i class="fas fa-sword"></i><i class="fas fa-shield-alt"></i></span>
            <span>Battles</span>
          </a>
          <a href="marketplace.html" class="nav-pill">
            <i class="fas fa-store"></i>
            <span>Marketplace</span>
          </a>
          <a href="rewards.html" class="nav-pill">
            <i class="fas fa-gift"></i>
            <span>Rewards</span>
          </a>
        </nav>

        <div class="ml-4 flex items-center gap-3">
          <!-- Coin Balance -->
          <div id="user-balance" class="balance-pill" aria-live="polite">
            <span class="balance-icon">
              <img src="https://cdn-icons-png.flaticon.com/128/6369/6369589.png" class="h-4 w-4 object-contain" alt="Coins" />
            </span>
            <span id="balance-amount" class="balance-amount">0</span>
            <span class="balance-label">coins</span>
            <button id="topup-button" class="topup-trigger" type="button" aria-label="Add coins">+</button>
          </div>

          <!-- Username + Dropdown -->
          <div class="relative">
            <button id="dropdown-toggle" class="profile-trigger" type="button" aria-haspopup="true" aria-expanded="false">
              <i class="fas fa-user-circle text-xl"></i>
              <span id="username-display" class="truncate">User</span>
              <i class="fas fa-chevron-down text-xs"></i>
            </button>
            <div id="user-dropdown" class="profile-menu hidden" role="menu">
              <a href="inventory.html" class="profile-menu-item" role="menuitem">Inventory</a>
              <a href="how-it-works.html" class="profile-menu-item" role="menuitem">How It Works</a>
              <a id="signin-desktop" href="auth.html" class="profile-menu-item profile-menu-item--positive" role="menuitem">Sign In</a>
              <a id="logout-desktop" href="#" class="profile-menu-item profile-menu-item--danger" role="menuitem">Logout</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Mobile Coin Balance and Menu Toggle -->
      <div class="flex items-center gap-2 lg:hidden">
        <div id="user-balance-mobile-header" class="balance-pill balance-pill--compact" aria-live="polite">
          <span class="balance-icon">
            <img src="https://cdn-icons-png.flaticon.com/128/6369/6369589.png" class="h-4 w-4 object-contain" alt="Coins" />
          </span>
          <span id="balance-amount-mobile" class="balance-amount">0</span>
        </div>
        <button id="menu-toggle" class="mobile-toggle" type="button" aria-expanded="false" aria-controls="mobile-dropdown">
          <span class="sr-only">Toggle navigation</span>
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
  </div>
</header>

<!-- Mobile Dropdown -->
<div id="mobile-dropdown" class="mobile-menu-panel hidden" role="menu">
  <div class="mobile-balance" role="presentation">
    <span class="flex items-center gap-2 text-sm font-medium text-slate-100">
      <img src="https://cdn-icons-png.flaticon.com/128/6369/6369589.png" class="h-4 w-4" alt="Coins">
      <span id="balance-amount-mobile-dropdown">0</span> coins
    </span>
    <button id="topup-button-mobile" class="topup-trigger" type="button" aria-label="Add coins">+</button>
  </div>
  <a id="inventory-link" href="inventory.html" class="mobile-menu-item" role="menuitem">Inventory</a>
  <a href="how-it-works.html" class="mobile-menu-item" role="menuitem">How It Works</a>
  <a href="index.html" class="mobile-menu-item" role="menuitem">
    <i class="fas fa-box-open"></i>
    <span>Open Packs</span>
  </a>
  <a href="box-battles.html" class="mobile-menu-item" role="menuitem">
    <span class="flex items-center gap-1"><i class="fas fa-sword"></i><i class="fas fa-shield-alt"></i></span>
    <span>Battles</span>
  </a>
  <a href="marketplace.html" class="mobile-menu-item" role="menuitem">
    <i class="fas fa-store"></i>
    <span>Marketplace</span>
  </a>
  <a href="rewards.html" class="mobile-menu-item" role="menuitem">
    <i class="fas fa-gift"></i>
    <span>Rewards</span>
  </a>
  <a id="mobile-auth-button" href="auth.html" class="mobile-menu-item mobile-menu-item--accent" role="menuitem">Sign In</a>
</div>
