<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Packly.gg | Virtual Packs, Real Cards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="scripts/firebase-config.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at 20% 20%, rgba(99,102,241,0.12), transparent 25%),
                        radial-gradient(circle at 80% 10%, rgba(236,72,153,0.12), transparent 25%),
                        radial-gradient(circle at 50% 70%, rgba(34,211,238,0.14), transparent 35%),
                        #0b1020;
            color: #e5e7eb;
        }

        .gradient-text {
            background: linear-gradient(90deg, #a855f7, #6366f1, #22d3ee);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .pack-card {
            transition: all 0.3s ease;
        }

        .pack-card:hover {
            transform: translateY(-4px) scale(1.01);
        }

        .gem-icon {
            filter: drop-shadow(0 0 2px rgba(56, 189, 248, 0.7));
        }

        .navbar {
            backdrop-filter: blur(10px);
            background-color: var(--nav-bg);
            border-color: var(--nav-border);
            box-shadow: var(--nav-shadow);
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }

        .reel-wrapper {
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 260px;
            margin: 0 auto;
            border-radius: 20px;
            background: radial-gradient(circle at 20% 20%, rgba(99,102,241,0.2), transparent 45%),
                        radial-gradient(circle at 80% 0%, rgba(236,72,153,0.25), transparent 45%),
                        #0f172a;
            padding: 1rem 0;
            display: flex;
            align-items: center;
            border: 1px solid rgba(148, 163, 184, 0.35);
            box-shadow: 0 24px 38px rgba(8, 7, 27, 0.55);
        }

        .hot-reel-wrapper {
            background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 25px 45px rgba(0,0,0,0.35);
            padding: 2rem;
        }

        .hot-reel-wrapper .tile {
            flex: 0 0 210px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 18px;
            box-shadow: 0 18px 36px rgba(0,0,0,0.25);
            margin: 0 12px;
        }

        .hot-reel-wrapper .tile-info {
            background: linear-gradient(180deg, rgba(15, 23, 42, 0), rgba(15, 23, 42, 0.85));
            border-radius: 0 0 18px 18px;
        }

        .hot-reel-wrapper .tile img {
            height: 170px;
        }

        .spinner-featured-pack {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            width: 100%;
            max-width: 520px;
        }

        .spinner-pack-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 18px;
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 18px 32px rgba(15, 23, 42, 0.3);
            max-width: 360px;
            width: 100%;
            color: #e5e7eb;
            backdrop-filter: blur(12px);
        }

        .spinner-pack-badge.hidden { display: none; }

        .spinner-pack-badge img {
            width: 48px;
            height: 48px;
            border-radius: 999px;
            object-fit: cover;
            border: 2px solid rgba(99, 102, 241, 0.7);
            background: #0f172a;
        }

        .spinner-pack-meta {
            display: flex;
            flex-direction: column;
            line-height: 1.1;
            gap: 2px;
            align-items: flex-start;
            text-align: left;
        }

        .spinner-pack-meta .label {
            font-size: 0.7rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: #a5b4fc;
        }

        .spinner-pack-meta .name {
            font-size: 0.95rem;
            font-weight: 700;
            color: #f8fafc;
            letter-spacing: 0.02em;
        }

        .spinner-pack-meta .price {
            font-size: 0.75rem;
            color: #cbd5f5;
            opacity: 0.9;
        }

        .reel { display: flex; will-change: transform; padding: 0; align-items: center; }

        .tile {
            flex: 0 0 150px;
            margin: 0 8px;
            position: relative;
            background: #1f2937;
            border: 1px solid #2e3649;
            border-radius: 16px;
            padding: 6px;
            color: #f1f5f9;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .tile img {
            width: 138px;
            height: 184px;
            object-fit: cover;
            border-radius: 12px;
        }

        .tile-info {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.55);
            font-size: 0.75rem;
            padding: 6px 8px;
            border-bottom-left-radius: 16px;
            border-bottom-right-radius: 16px;
            text-align: center;
            backdrop-filter: blur(6px);
        }

        .tile-info .name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .tile-info .price {
            margin-top: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            color: #fbbf24;
        }

        .tile-info .price img { width: 0.75rem; height: 0.75rem; }

        .center-marker {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            pointer-events: none;
        }

        .center-marker .marker-line {
            flex: 1;
            width: 2px;
            background: linear-gradient(#c084fc,#22d3ee);
            box-shadow: 0 0 10px #c084fc;
        }

        .center-marker .marker-arrow { width: 0; height: 0; border-left: 12px solid transparent; border-right: 12px solid transparent; }
        .center-marker .marker-arrow.top { border-top: 12px solid #cbd5e1; }
        .center-marker .marker-arrow.bottom { border-bottom: 12px solid #cbd5e1; }

        .pill { display: inline-block; padding: 2px 8px; border-radius: 999px; font-weight: 600; }
        .pill.common { background: #e2e8f0; color: #475569; }
        .pill.uncommon { background: #dcfce7; color: #047857; }
        .pill.rare { background: #dbeafe; color: #1d4ed8; }
        .pill.ultrarare { background: #ede9fe; color: #6d28d9; }
        .pill.legendary { background: #fef3c7; color: #92400e; }

        @media (max-width: 640px) {
            .reel-wrapper { height: 220px; }
            .hot-reel-wrapper { padding: 1.25rem; }
            .hot-reel-wrapper .tile { flex: 0 0 180px; }
            .hot-reel-wrapper .tile img { height: 140px; }
        }
    </style>
</head>
<body class="bg-slate-900">
  <script src="scripts/preloader.js"></script>
  <header></header>

  <main class="homepage-shell">
    <section class="hero-neon">
      <div class="hero-gradient"></div>
      <div class="hero-grid">
        <div class="hero-copy">
          <div class="hero-chip">Arcade dropverse</div>
          <h1 class="hero-title">Open surreal <span class="gradient-text">packs</span> & flex the <span class="gradient-text">wins</span>.</h1>
          <p class="hero-subtext">Dive into a neon playground of virtual packs, live pulls, and IRL-ready cards. Rip, reveal, and reroll without leaving the couch.</p>
          <div class="hero-cta">
            <a href="#available-packs" class="btn-primary">Open a pack</a>
            <a href="how-it-works.html" class="btn-ghost">Watch how it works</a>
          </div>
          <div class="hero-stats">
            <div class="stat-card">
              <span class="label">Cards shipped</span>
              <strong>1.2M+</strong>
            </div>
            <div class="stat-card">
              <span class="label">Live rips today</span>
              <strong>8,431</strong>
            </div>
            <div class="stat-card">
              <span class="label">Avg. win boost</span>
              <strong>3.4x</strong>
            </div>
          </div>
        </div>
        <div class="hero-stage">
          <div class="orb orb-purple"></div>
          <div class="orb orb-cyan"></div>
          <div class="hero-stage-card floating">
            <div class="stage-top">
              <div class="glow-pill">
                <i class="fa-solid fa-bolt"></i>
                <span>Legendary heat</span>
              </div>
              <div class="hero-badges">
                <span class="badge-pill">Instant payout</span>
                <span class="badge-pill">Clips saved</span>
              </div>
            </div>
            <div class="spinner-featured-pack">
              <div id="spinner-pack-badge" class="spinner-pack-badge hidden">
                <img id="spinner-pack-image" src="" alt="Featured pack thumbnail">
                <div class="spinner-pack-meta">
                  <span class="label">Featured pack</span>
                  <span id="spinner-pack-name" class="name"></span>
                  <span id="spinner-pack-price" class="price"></span>
                </div>
              </div>
              <div class="reel-wrapper">
                <div id="demo-spinner" class="reel"></div>
                <div class="center-marker">
                  <span class="marker-arrow top"></span>
                  <span class="marker-line"></span>
                  <span class="marker-arrow bottom"></span>
                </div>
              </div>
            </div>
            <div class="stage-bottom">
              <div class="avatar-row">
                <img src="https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=80&q=80" alt="fan" />
                <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=80&q=80" alt="fan" />
                <img src="https://images.unsplash.com/photo-1502680390469-be75c86b636f?auto=format&fit=crop&w=80&q=80" alt="fan" />
                <span class="avatar-count">8.4k now ripping</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="stacked-section">
      <div class="section-header">
        <div>
          <p class="eyebrow">Energize your pulls</p>
          <h2 class="section-title">Pocket-ready drops, arcade-grade polish</h2>
        </div>
        <div class="header-actions">
          <span class="chip ghost">Fast shipping</span>
          <span class="chip ghost">Live clips</span>
          <span class="chip ghost">Instant relist</span>
        </div>
      </div>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="icon-ring">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
          </div>
          <h3>Studio-grade reveal</h3>
          <p>Every spin is wrapped in glassy gradients, glow markers, and cinematic roll-stop timing.</p>
        </div>
        <div class="feature-card">
          <div class="icon-ring">
            <i class="fa-solid fa-rocket"></i>
          </div>
          <h3>Speed to flex</h3>
          <p>Clip your wins, vault them, or ship worldwide with the tap of a glowing button.</p>
        </div>
        <div class="feature-card">
          <div class="icon-ring">
            <i class="fa-solid fa-shield-heart"></i>
          </div>
          <h3>Built-in trust layer</h3>
          <p>Verified drops, transparent odds, and balance-aware filters to keep rips honest.</p>
        </div>
      </div>
    </section>

    <section class="live-strip">
      <div class="section-header">
        <div>
          <p class="eyebrow">Live heat</p>
          <h2 class="section-title">Freshest pulls flying across the screen</h2>
        </div>
        <div class="header-actions">
          <span class="chip primary">Streaming now</span>
          <span class="chip outline">Auto-refresh</span>
        </div>
      </div>
      <div class="hot-reel-wrapper">
        <div id="hot-items-spinner" class="reel"></div>
      </div>
    </section>

    <section id="available-packs" class="packs-zone">
      <div class="section-header">
        <div>
          <p class="eyebrow">Pick your flavor</p>
          <h2 class="section-title">Available packs</h2>
          <p class="section-subtext">Dial in by budget, chase tier, or let the vibes pick for you.</p>
        </div>
        <div class="header-actions">
          <button id="filter-toggle" class="filter-toggle-btn"><i class="fas fa-filter"></i><span>Show Filters</span></button>
          <button id="clear-filters" class="filter-clear-btn"><i class="fas fa-undo"></i><span>Clear</span></button>
        </div>
      </div>

      <div id="filter-panel" class="filter-panel hidden">
        <div class="filter-row">
          <div class="filter-group">
            <label for="search-box" class="filter-label">Search</label>
            <div class="filter-input-wrapper">
              <i class="fa-solid fa-magnifying-glass"></i>
              <input type="text" id="search-box" placeholder="Search packs, vibes, or themes" class="filter-input">
            </div>
          </div>
          <div class="filter-group">
            <label class="filter-label">Price range (gems)</label>
            <div class="filter-price-grid">
              <div class="filter-input-wrapper">
                <i class="fa-solid fa-arrow-down-1-9"></i>
                <input type="number" id="min-price" min="0" placeholder="Min" class="filter-input">
              </div>
              <div class="filter-input-wrapper">
                <i class="fa-solid fa-arrow-up-9-1"></i>
                <input type="number" id="max-price" min="0" placeholder="Max" class="filter-input">
              </div>
            </div>
          </div>
          <div class="filter-group">
            <label class="filter-label">Sort</label>
            <div class="filter-input-wrapper">
              <i class="fa-solid fa-arrows-up-down"></i>
              <select id="sort-select" class="filter-input">
                <option value="default">Featured</option>
                <option value="asc">Price: Low to High</option>
                <option value="desc">Price: High to Low</option>
                <option value="rarity">Highest Rarity</option>
              </select>
            </div>
          </div>
          <div class="filter-group">
            <label class="filter-label">Affordability</label>
            <label class="checkbox-pill">
              <input type="checkbox" id="affordable-only" class="sr-only">
              <span class="pill-label">
                <i class="fa-solid fa-coins"></i>
                Show only what I can rip
              </span>
            </label>
          </div>
        </div>
        <div class="filter-row categories">
          <button class="category-tab active" data-category="new"><i class="fa-solid fa-sparkles"></i><span class="tab-label">New</span></button>
          <button class="category-tab" data-category="featured"><i class="fa-solid fa-fire"></i><span class="tab-label">Featured</span></button>
          <button class="category-tab" data-category="starter"><i class="fa-solid fa-seedling"></i><span class="tab-label">Starter</span></button>
          <button class="category-tab" data-category="other"><i class="fa-solid fa-shuffle"></i><span class="tab-label">Shuffle all</span></button>
        </div>
      </div>

      <div class="packs-display">
        <div id="cases-carousel" class="pack-carousel hidden space-x-4 overflow-x-auto pb-4"></div>
        <div id="cases-container" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6"></div>
      </div>
      <div class="see-more-wrap">
        <button id="see-more-cases" class="see-more-btn hidden">Load more magic</button>
      </div>
    </section>

    <section class="legendary-grid">
      <div class="section-header">
        <div>
          <p class="eyebrow">Treasure room</p>
          <h2 class="section-title">Legendary pulls that broke the chat</h2>
          <p class="section-subtext">Saved clips, rarity tags, and the packs they came from.</p>
        </div>
        <div class="header-actions">
          <span class="chip primary">Verified hits</span>
          <span class="chip outline">Shipped or vaulted</span>
        </div>
      </div>
      <div class="legendary-cards">
        <article class="legendary-card">
          <div class="legendary-card__media">
            <span class="legendary-chip">Hall of Fame</span>
            <div class="legendary-pack">
              <img src="https://images.unsplash.com/photo-1489515217757-5fd1be406fef?auto=format&fit=crop&w=400&q=80" alt="Cosmic Court">
              <div>
                <p class="pack-label">Pulled from</p>
                <p class="pack-name">Cosmic Court</p>
              </div>
            </div>
            <div class="legendary-ribbons">
              <span class="legendary-tag">1/1 Found</span>
              <span class="legendary-tag">$4,320 Valuation</span>
            </div>
          </div>
          <div class="legendary-card__info">
            <h3>Neon Monarch PSA10</h3>
            <p>Foil etched centerpiece with aurora overlays and a hero badge that glows when tilted.</p>
            <div class="legendary-meta">
              <span>âš¡ Minted live on stream</span>
              <span>ðŸŽ¥ Clip locked in vault</span>
            </div>
          </div>
        </article>
        <article class="legendary-card">
          <div class="legendary-card__media">
            <span class="legendary-chip">Streamer pick</span>
            <div class="legendary-pack">
              <img src="https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=crop&w=400&q=80" alt="Aurora Arsenal">
              <div>
                <p class="pack-label">Pulled from</p>
                <p class="pack-name">Aurora Arsenal</p>
              </div>
            </div>
            <div class="legendary-ribbons">
              <span class="legendary-tag">Signed insert</span>
              <span class="legendary-tag">Serial 05/25</span>
            </div>
          </div>
          <div class="legendary-card__info">
            <h3>Starlit Striker</h3>
            <p>Holo shattered glass background with electric foil edging and pastel nebula accents.</p>
            <div class="legendary-meta">
              <span>ðŸš€ Claimed in 12s</span>
              <span>ðŸ“¦ Same-day ship</span>
            </div>
          </div>
        </article>
        <article class="legendary-card">
          <div class="legendary-card__media">
            <span class="legendary-chip">Community vote</span>
            <div class="legendary-pack">
              <img src="https://images.unsplash.com/photo-1565538420870-da08ff96a207?auto=format&fit=crop&w=400&q=80" alt="Twin Dragons">
              <div>
                <p class="pack-label">Pulled from</p>
                <p class="pack-name">Twin Dragons</p>
              </div>
            </div>
            <div class="legendary-ribbons">
              <span class="legendary-tag">Dragon chase</span>
              <span class="legendary-tag">Clip saved</span>
            </div>
          </div>
          <div class="legendary-card__info">
            <h3>N's Reshiram</h3>
            <p>Storybook illustration with swirling blues and silvers plus a bronze champion seal.</p>
            <div class="legendary-meta">
              <span>ðŸ”¥ Crowd favorite</span>
              <span>ðŸŽ¥ Highlight replay</span>
            </div>
          </div>
        </article>
      </div>
    </section>

    <section class="reasons">
      <div class="section-header">
        <div>
          <p class="eyebrow">Why Packly.gg</p>
          <h2 class="section-title">The smoothest way to collect</h2>
          <p class="section-subtext">Drop-in ready for both collectors and casuals.</p>
        </div>
      </div>
      <div class="reason-grid">
        <div class="reason-card">
          <div class="icon-ring">
            <i class="fa-solid fa-certificate"></i>
          </div>
          <h3>100% authentic</h3>
          <p>Verified from trusted sources like StockX and official retailers. Real gear, guaranteed.</p>
        </div>
        <div class="reason-card">
          <div class="icon-ring">
            <i class="fa-solid fa-repeat"></i>
          </div>
          <h3>Swap or reroll</h3>
          <p>Don't love the pull? Trade, sell back for gems, or rip again instantly with no fees.</p>
        </div>
        <div class="reason-card">
          <div class="icon-ring">
            <i class="fa-solid fa-plane-departure"></i>
          </div>
          <h3>Global shipping</h3>
          <p>Ship worldwide or keep it digital by vaulting items. You're in control of every prize.</p>
        </div>
      </div>
    </section>

    <section class="payments">
      <h3>Accepted Payment Methods</h3>
      <div class="payment-logos">
        <img class="h-12" src="https://cdn-icons-png.flaticon.com/128/349/349221.png" alt="Visa">
        <img class="h-12" src="https://cdn-icons-png.flaticon.com/128/11378/11378185.png" alt="MasterCard">
        <img class="h-12" src="https://cdn-icons-png.flaticon.com/128/179/179431.png" alt="Amex">
        <img class="h-12" src="https://cdn-icons-png.flaticon.com/128/5968/5968279.png" alt="Apple Pay">
        <img class="h-12" src="https://cdn-icons-png.flaticon.com/128/6124/6124998.png" alt="Google Pay">
      </div>
    </section>
  </main>

  <footer></footer>

  <!-- Free Pack Modal -->
  <div id="freePackModal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
    <div class="absolute inset-0 bg-black opacity-50"></div>
    <div class="relative bg-white rounded-lg max-w-md w-full mx-4 p-6">
      <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-500">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      <div class="text-center">
        <img src="https://firebasestorage.googleapis.com/v0/b/cases-e5b4e.firebasestorage.app/o/ChatGPT%20Image%20Aug%2010%2C%202025%2C%2011_08_17%20PM.png?alt=media&token=4950e6a0-1cf9-4c7b-aa56-686dc42693a8" class="h-24 w-24 mx-auto mb-4" alt="Mascot">
        <h3 class="text-lg font-medium text-gray-900">Get a FREE pack</h3>
        <p class="mt-2 text-sm text-gray-500">Find out how it works and get a FREE pack! All you have to do is sign up to claim it!</p>
        <div class="mt-6 flex justify-center space-x-4">
          <button onclick="closeModal()" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">No thanks</button>
          <a href="auth.html" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700">Sign Up</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Gems Modal -->
  <div id="addGemsModal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
    <div class="absolute inset-0 bg-black opacity-50"></div>
    <div class="relative bg-white rounded-lg max-w-lg w-full mx-4 p-6">
      <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-500">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-lg font-medium text-gray-900 mb-4">Add Gems</h3>
          <div class="space-y-4">
            <button class="w-full px-4 py-3 bg-indigo-50 text-indigo-700 rounded-lg border border-indigo-100 text-left">
              <div class="flex justify-between items-center">
                <span class="font-semibold">1,000 +100 Bonus</span>
                <span>$10.00</span>
              </div>
              <p class="text-xs text-gray-500 mt-1">Starter bundle with bonus gems</p>
            </button>
            <button class="w-full px-4 py-3 bg-indigo-50 text-indigo-700 rounded-lg border border-indigo-100 text-left">
              <div class="flex justify-between items-center">
                <span class="font-semibold">5,000 +800 Bonus</span>
                <span>$50.00</span>
              </div>
              <p class="text-xs text-gray-500 mt-1">Best value for daily rips</p>
            </button>
            <button class="w-full px-4 py-3 bg-indigo-50 text-indigo-700 rounded-lg border border-indigo-100 text-left">
              <div class="flex justify-between items-center">
                <span class="font-semibold">15,000 +1,500 Bonus</span>
                <span>$150.00</span>
              </div>
              <p class="text-xs text-gray-500 mt-1">Stream big drops with max bonus</p>
            </button>
          </div>
          <div class="mt-4 text-sm text-gray-500">Payments processed securely by Stripe.</div>
        </div>
        <div class="bg-gradient-to-br from-indigo-600 to-purple-600 text-white rounded-xl p-6 shadow-lg flex flex-col justify-between">
          <div>
            <p class="text-xs uppercase tracking-wide text-white/70">Perks</p>
            <ul class="mt-3 space-y-3 text-sm">
              <li class="flex items-start gap-3"><i class="fa-solid fa-bolt mt-1"></i><span>Instant top-up with vault auto-protect.</span></li>
              <li class="flex items-start gap-3"><i class="fa-solid fa-ticket mt-1"></i><span>Priority access to limited packs.</span></li>
              <li class="flex items-start gap-3"><i class="fa-solid fa-shield-heart mt-1"></i><span>Charge protection and live support.</span></li>
            </ul>
          </div>
          <button class="mt-6 w-full bg-white text-indigo-700 font-semibold py-3 rounded-lg shadow">Continue to Stripe</button>
        </div>
      </div>
    </div>
  </div>

  <script src="pack-opener/spinner.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const root = document.getElementById('demo-spinner');
      if (!root) return;

      const badge = document.getElementById('spinner-pack-badge');
      const badgeImage = document.getElementById('spinner-pack-image');
      const badgeName = document.getElementById('spinner-pack-name');
      const badgePrice = document.getElementById('spinner-pack-price');
      const DEFAULT_CASE_ID = '-OPd7bkeviB4Xq_1Ea6i';

      function formatPackPrice(data) {
        if (data?.isFree) return 'Free pack';
        const value = Number(data?.price || 0);
        if (!value) return '';
        return `${value.toLocaleString()} gems`;
      }

      function applyBadge(data, fallbackConfig = {}) {
        if (!badge || !badgeImage || !badgeName || !badgePrice) return;
        const packName = data?.name || fallbackConfig.caseName || 'Featured pack';
        const packImage = data?.image || fallbackConfig.thumbnail || `https://ui-avatars.com/api/?name=${encodeURIComponent(packName)}&background=1e293b&color=f8fafc&rounded=true`;
        const priceLabel = formatPackPrice(data) || formatPackPrice(fallbackConfig) || 'Available now';
        badgeImage.src = packImage;
        badgeImage.alt = `${packName} thumbnail`;
        badgeName.textContent = packName;
        badgePrice.textContent = priceLabel;
        badge.classList.remove('hidden');
      }

      async function loadDemoSpinner() {
        let config = {};
        try {
          const configSnap = await firebase.database().ref('homeSpinnerConfig').once('value');
          config = configSnap.val() || {};
        } catch (err) {
          console.warn('Failed to load spinner config', err);
        }

        const requestedCaseId = config.caseId || DEFAULT_CASE_ID;

        async function fetchCase(caseId) {
          const snap = await firebase.database().ref('cases/' + caseId).once('value');
          return { id: caseId, data: snap.val() };
        }

        let caseResult = await fetchCase(requestedCaseId);
        if (!caseResult.data && requestedCaseId !== DEFAULT_CASE_ID) {
          caseResult = await fetchCase(DEFAULT_CASE_ID);
        }
        const caseData = caseResult.data;
        if (!caseData) return;

        const items = Object.values(caseData.prizes || {});
        if (!items.length) return;

        PackOpener.init({ root, items });
        PackOpener.setMuted(true);
        applyBadge(caseData, config);

        const legendaryIndices = items.reduce((arr, it, idx) => {
          if (it.rarity === 'legendary') arr.push(idx);
          return arr;
        }, []);
        if (!legendaryIndices.length) return;

        function loop() {
          const winIndex = legendaryIndices[Math.floor(Math.random() * legendaryIndices.length)];
          PackOpener.spinToIndex(winIndex, {
            durationMs: 2400,
            onReveal: () => setTimeout(loop, 1500)
          });
        }

        loop();
      }

      loadDemoSpinner();
    });
  </script>
  <script src="scripts/navbar.js"></script>
  <script>
    // Show free pack modal 7 seconds after load for signed-out users
    let freePackTimeout;
    firebase.auth().onAuthStateChanged(user => {
      if (!user && !sessionStorage.getItem('freePackDismissed')) {
        freePackTimeout = setTimeout(() => {
          const modal = document.getElementById('freePackModal');
          if (modal) modal.classList.remove('hidden');
        }, 7000);
      } else {
        clearTimeout(freePackTimeout);
      }
    });

    function closeModal() {
      const freePackModal = document.getElementById('freePackModal');
      const addGemsModal = document.getElementById('addGemsModal');
      if (freePackModal && !freePackModal.classList.contains('hidden')) {
        sessionStorage.setItem('freePackDismissed', 'true');
      }
      if (freePackModal) freePackModal.classList.add('hidden');
      if (addGemsModal) addGemsModal.classList.add('hidden');
    }

    function showAddGemsModal() {
      document.getElementById('addGemsModal').classList.remove('hidden');
    }

    const filterToggle = document.getElementById('filter-toggle');
    const filterPanel = document.getElementById('filter-panel');
    if (filterToggle && filterPanel) {
      const labelSpan = filterToggle.querySelector('span');
      const updateLabel = () => {
        const hidden = filterPanel.classList.contains('hidden');
        if (labelSpan) labelSpan.textContent = hidden ? 'Show Filters' : 'Hide Filters';
      };
      updateLabel();
      filterToggle.addEventListener('click', () => {
        filterPanel.classList.toggle('hidden');
        updateLabel();
      });
    }
  </script>
  <script type="module" src="scripts/hot-cards.js"></script>
  <script type="module" src="scripts/auth.js"></script>
  <script type="module" src="scripts/packs.js"></script>
  <script src="scripts/popups.js"></script>
  <script src="scripts/footer.js"></script>
  <script src="scripts/topup.js"></script>
  <script src="scripts/header.js"></script>
</body>
</html>
